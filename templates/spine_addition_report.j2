========================================
SPINE SWITCH ADDITION REPORT
========================================

Addition Date: {{ ansible_date_time.iso8601 }}

NEW SPINE SWITCH:
Hostname: {{ new_spine_info.hostname }}
Management IP: {{ new_spine_info.ip }}
Spine ID: {{ new_spine_info.spine_id }}
Loopback0: {{ new_spine_info.loopback }}

CONNECTIVITY:
Connected to Leaves: {{ new_spine_info.connected_leaves | join(', ') }}

INTERFACE CONFIGURATION:
{% for leaf_id in new_spine_info.connected_leaves %}
- Link to Leaf{{ '%02d' | format(leaf_id) }}: 10GE1/0/{{ loop.index }}
{% endfor %}

BGP PEERING:
{% for leaf_id in new_spine_info.connected_leaves %}
- BGP Peer: Leaf{{ '%02d' | format(leaf_id) }} Loopback0
{% endfor %}

OSPF ADJACENCIES:
{% for leaf_id in new_spine_info.connected_leaves %}
- OSPF Neighbor: Leaf{{ '%02d' | format(leaf_id) }}
{% endfor %}

ROUTE REFLECTOR:
- Acting as BGP Route Reflector for all leaf switches
- Reflecting EVPN routes for VXLAN overlay

VERIFICATION STEPS:
1. Ping loopback address:
   ping {{ new_spine_info.loopback.split('/')[0] }}

2. Check BGP status:
   display bgp peer
   display bgp l2vpn evpn routing-table

3. Check OSPF status:
   display ospf peer

4. Check interface status:
   display ip interface brief

5. Verify route reflection:
   display bgp routing-table

FABRIC REDUNDANCY:
- Increased spine count improves fabric resiliency
- ECMP paths available between all leaf pairs
- BGP multipath load balancing enabled

NEXT STEPS:
1. Verify all BGP sessions are established
2. Check traffic distribution across all spines
3. Update monitoring and alerting
4. Update network documentation

========================================
Report generated by Ansible Fabric Manager
========================================
